üß† Sp√©cification Technique : Module GPT (Prompt Builder + G√©n√©rateur d‚ÄôAudit)
üîç Objectif
Transformer les donn√©es d‚Äôun site client (structure DOM, contenus, performances) en un rapport d‚Äôaudit UX/UI automatis√©, g√©n√©r√© par GPT-4 via une s√©rie de prompts dynamiques.

üéØ Objectifs Fonctionnels
G√©n√©rer un audit √† partir de prompts sp√©cialis√©s (UX, UI, SEO, accessibilit√©‚Ä¶)

Injecter des donn√©es r√©elles dans chaque prompt

G√©rer le scoring automatique

G√©n√©rer une synth√®se finale structur√©e

Supporter l‚Äôhistorisation et la comparaison

üîß Technologies
Langage : Node.js ou Python

API IA : OpenAI GPT-4 (gpt-4-turbo)

Embedding (optionnel) : text-embedding-3-small pour RAG

File d‚Äôattente : BullMQ / Celery

Templates : fichiers JSON pour prompts versionn√©s

üß± Structure de donn√©es (exemple audit_sections en base)
Champ	Type	Description
id	UUID	ID unique
audit_id	UUID	R√©f√©rence √† l‚Äôaudit principal
section_type	STRING	ex: UX_HEADER, SEO_STRUCTURE
prompt_used	TEXT	Prompt final envoy√©
gpt_response	TEXT	R√©ponse brute GPT
score	INT (0‚Äì100)	Scoring UX fourni par GPT
priority	ENUM	low, medium, high

üìö Fonctionnement √âtape par √âtape
1. S√©lection des prompts actifs
Le syst√®me charge depuis la base tous les prompts enabled = true

Chaque prompt est typ√© (ex: UX_NAVIGATION, SEO_CONTENT)

2. Construction dynamique du prompt
√Ä partir du JSON issu du crawler (voir Module Crawler Brutux)

Les variables ({{site_structure}}, {{text_content}}, {{performance.LCP}}, etc.) sont inject√©es

Exemple de prompt final :
yaml
Copier le code
Tu es expert UX senior. Analyse le site suivant :
- Structure : header, hero, product-list, footer
- Texte visible : "Bienvenue", "Acheter maintenant"
- Performance : LCP 3.2s, Score accessibilit√© 88

Fais un audit UX structur√© de la navigation. Note sur 100 et 3 recommandations.
3. Appel GPT
js
Copier le code
const completion = await openai.chat.completions.create({
  model: "gpt-4-turbo",
  messages: [{ role: "user", content: finalPrompt }],
  temperature: 0.7
});
4. Post-traitement de la r√©ponse
Extraction :

Score

Liste de recommandations

R√©sum√©

Ajout d‚Äôun niveau de priorit√©

5. Enregistrement en base
audit_sections par type

Possibilit√© d‚Äôutiliser une section_summary pour une synth√®se globale

üìä Synth√®se finale
Apr√®s g√©n√©ration de toutes les sections :

G√©n√©rer une synth√®se compl√®te de l‚Äôaudit

Note globale UX

Priorit√©s top 3

Graphiques ou tableaux comparatifs

üîÑ √âvolutivit√© pr√©vue
Possibilit√© d‚Äôajouter de nouveaux prompts sans toucher au code

Possibilit√© de versionner les prompts et leur r√©ponse

Passage √† un syst√®me RAG avec vector DB pour enrichir les prompts automatiquement avec :

Extraits d‚Äôanciens audits

Corpus UX internes

‚ö†Ô∏è Erreurs g√©rables
Timeout ou quota OpenAI

R√©ponse GPT trop courte ou vide

R√©ponse non structur√©e (fallback ou prompt de rattrapage)

Probl√®me d‚Äôinjection de variable (template mal form√©)

